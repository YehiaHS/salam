<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Prayer Tracker</title>
    <!-- PWA / Home Screen Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PrayerTime">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Light Theme (Default) */
            --bg-gradient: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(0, 0, 0, 0.08);
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --accent: #3b82f6;
            --nav-bg: rgba(255, 255, 255, 0.8);
            --safe-top: env(safe-area-inset-top, 30px);
            --safe-bottom: env(safe-area-inset-bottom, 30px);
            --nav-height: 70px;
        }

        [data-theme="dark"] {
            --bg-gradient: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.12);
            --text-primary: #f8fafc;
            --text-secondary: rgba(248, 250, 252, 0.6);
            --accent: #fbbf24;
            --nav-bg: rgba(15, 23, 42, 0.8);
        }

        [data-theme="oled"] {
            --bg-gradient: linear-gradient(180deg, #000000 0%, #000000 100%);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.15);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.5);
            --accent: #ffffff;
            --nav-bg: rgba(0, 0, 0, 0.9);
        }

        [data-theme="dynamic"] {
            /* Inherits shared dark/glass styles, background set by JS */
            --glass-bg: rgba(255, 255, 255, 0.12);
            --glass-border: rgba(255, 255, 255, 0.18);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.65);
            --accent: #fbbf24;
            --nav-bg: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Inter', sans-serif;
            background: var(--bg-gradient);
            background-attachment: fixed;
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Animated Background Flair */
        .bg-flair {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .beam {
            position: absolute;
            width: 150%;
            height: 150%;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.08) 0%, transparent 60%);
            top: -25%;
            left: -25%;
            animation: drift 20s infinite alternate cubic-bezier(0.445, 0.05, 0.55, 0.95);
        }

        @keyframes drift {
            0% {
                transform: translate(-5%, -5%) scale(1);
            }

            100% {
                transform: translate(5%, 5%) scale(1.1);
            }
        }

        .container {
            padding: var(--safe-top) 20px calc(var(--nav-height) + var(--safe-bottom) + 20px);
            max-width: 500px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .view-section {
            display: none;
            flex-direction: column;
            gap: 20px;
            width: 100%;
        }

        .view-section.active {
            display: flex;
        }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: calc(var(--nav-height) + var(--safe-bottom));
            background: var(--nav-bg);
            backdrop-filter: blur(30px) saturate(200%);
            -webkit-backdrop-filter: blur(30px) saturate(200%);
            border-top: 0.5px solid var(--glass-border);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding-bottom: var(--safe-bottom);
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.65rem;
            font-weight: 500;
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .nav-item.active {
            color: var(--text-primary);
        }

        .nav-item svg {
            width: 24px;
            height: 24px;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .nav-item.active svg {
            opacity: 1;
        }

        /* Quran Reader Styles */
        .quran-container {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .votd-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%);
        }

        .sura-selector {
            width: 100%;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 1rem;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
        }

        .ayah-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .ayah-card {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .ayah-arabic {
            font-size: 1.8rem;
            text-align: right;
            direction: rtl;
            font-family: 'Amiri', serif;
            line-height: 2;
        }

        .ayah-translation,
        .ayah-transliteration {
            font-size: 1rem;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .ayah-transliteration {
            color: var(--text-secondary);
            font-style: italic;
            font-size: 0.9rem;
        }

        .quran-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .reader-mode-toggle {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        /* Reader Dark/Light Mode Overrides */
        .quran-reader.light-mode {
            background: #fdfdfd;
            color: #1a1a1a;
            border-radius: 24px;
        }

        .quran-reader.light-mode .ayah-card {
            border-bottom: 1px solid #eee;
        }

        .quran-reader.light-mode .ayah-translation {
            color: #333;
        }

        .quran-reader.light-mode .ayah-transliteration {
            color: #666;
        }

        .quran-reader.light-mode .ayah-arabic {
            color: #000;
        }

        /* Location Search UI */
        .location-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            position: relative;
        }

        .search-trigger {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }

        .location-search-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            z-index: 2000;
            padding: 40px 20px;
            animation: fadeIn 0.3s ease;
        }

        .location-search-overlay.active {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .search-input-group {
            display: flex;
            gap: 10px;
        }

        .location-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 14px 20px;
            border-radius: 16px;
            font-size: 1rem;
            outline: none;
        }

        .close-search {
            align-self: flex-end;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 10px;
        }

        .search-results {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .search-result-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            padding: 16px;
            border-radius: 16px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-result-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .search-result-name {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .search-result-details {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .auto-locate-btn {
            background: var(--accent);
            color: #000;
            border: none;
            padding: 12px;
            border-radius: 14px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
        }

        /* Header Section */
        header {
            text-align: center;
            padding-top: 40px;
            padding-bottom: 20px;
        }

        .location-name {
            font-size: 2.2rem;
            font-weight: 300;
            margin-bottom: 4px;
            letter-spacing: -0.5px;
        }

        .current-prayer {
            font-size: 0.95rem;
            font-weight: 400;
            opacity: 0.8;
            letter-spacing: 0.5px;
        }

        .countdown {
            font-size: clamp(3.5rem, 18vw, 6.5rem);
            font-weight: 100;
            margin: 8px 0;
            line-height: 1;
            letter-spacing: -2px;
            font-variant-numeric: tabular-nums;
            white-space: nowrap;
        }

        .next-prayer-info {
            font-size: 1.2rem;
            font-weight: 400;
            margin-top: 8px;
        }

        /* Glass Cards */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 20px;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);
        }

        /* Prayer List */
        .prayer-list {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 8px 0;
        }

        .prayer-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 24px;
            position: relative;
        }

        .prayer-item:not(:last-child)::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 24px;
            right: 24px;
            height: 0.5px;
            background: rgba(255, 255, 255, 0.1);
        }

        .prayer-item.active {
            background: rgba(255, 255, 255, 0.1);
        }

        .prayer-item span:first-child {
            font-size: 1.1rem;
            font-weight: 400;
        }

        .prayer-item span:last-child {
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Qibla Compass UI */
        .qibla-compass-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px 0 0;
            gap: 16px;
        }

        .compass-ring {
            width: 140px;
            height: 140px;
            border: 1.5px solid var(--glass-border);
            border-radius: 50%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(255, 255, 255, 0.03);
        }

        .compass-arrow {
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 35px solid var(--accent);
            position: absolute;
            top: 20px;
            filter: drop-shadow(0 0 12px var(--accent));
            transition: transform 0.15s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-origin: center 50px;
        }

        .kaaba-icon {
            font-size: 1.8rem;
            z-index: 2;
        }

        .compass-status {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-weight: 400;
        }

        .permission-btn {
            background: rgba(255, 255, 255, 0.9);
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 24px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .stat-card {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .stat-label {
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-secondary);
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .stat-value {
            font-size: 1.6rem;
            font-weight: 300;
            letter-spacing: -0.5px;
        }

        /* Tasbih Feature */
        .tasbih-section {
            text-align: center;
            cursor: pointer;
            padding: 40px 20px;
            position: relative;
            overflow: hidden;
        }

        .tasbih-count {
            font-size: 4rem;
            font-weight: 300;
            margin: 8px 0;
            letter-spacing: -1px;
        }

        .tasbih-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-top: 15px;
        }

        /* Settings View Specific */
        #view-settings {
            padding-bottom: 20px;
        }

        .settings-header-tab {
            text-align: center;
            margin-bottom: 30px;
            padding-top: 20px;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .container>* {
            animation: fadeIn 1s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }

        /* Loading Overlay */
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s ease;
        }

        .loader {
            width: 48px;
            height: 48px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-bottom-color: #fff;
            border-radius: 50%;
            animation: rotation 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
        }

        /* Settings Menu UI */
        .settings-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-gradient);
            background-attachment: fixed;
            z-index: 3000;
            padding: var(--safe-top) 20px var(--safe-bottom);
            overflow-y: auto;
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
            }

            to {
                transform: translateY(0);
            }
        }

        .settings-overlay.active {
            display: block;
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .settings-title {
            font-size: 1.8rem;
            font-weight: 600;
        }

        .settings-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 30px;
        }

        .settings-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .settings-option {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            padding: 16px;
            border-radius: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .settings-option.active {
            border-color: var(--accent);
            background: rgba(59, 130, 246, 0.1);
        }

        .settings-option span {
            font-weight: 500;
        }

        .check-icon {
            display: none;
            color: var(--accent);
        }

        .settings-option.active .check-icon {
            display: block;
        }

        .btn-close {
            display: none;
        }
    </style>
</head>

<body>
    <div class="bg-flair">
        <div class="beam"></div>
    </div>
    <div id="loading">
        <div class="loader"></div>
    </div>

    <div class="container">
        <!-- Dashboard View -->
        <div id="view-dashboard" class="view-section active">
            <header id="header">
                <div class="location-header">
                    <div class="location-name" id="city-name" onclick="openLocationSearch()" data-i18n="detecting">
                        Detecting...</div>
                    <div id="remote-local-time"
                        style="font-size: 0.85rem; opacity: 0.7; margin-top: -8px; margin-bottom: 8px;">--:--</div>
                    <button class="search-trigger" onclick="openLocationSearch()">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2.5">
                            <circle cx="11" cy="11" r="8" />
                            <path d="m21 21-4.35-4.35" />
                        </svg>
                        <span data-i18n="change_location">Change Location</span>
                    </button>
                </div>
                <div class="current-prayer" id="next-prayer-name"><span data-i18n="next">NEXT</span>: LOADING</div>
                <div class="countdown" id="countdown">00:00:00</div>
                <div class="next-prayer-info" id="hijri-date">...</div>
            </header>

            <section class="prayer-list" id="prayer-list">
                <!-- Prayer items will be injected here -->
            </section>

            <section class="glass-card qibla-compass-section">
                <div class="stat-label">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2v20M2 12h20M4.93 4.93l14.14 14.14M4.93 19.07L19.07 4.93" />
                    </svg>
                    <span data-i18n="qibla_realtime">Real-time Qibla</span>
                </div>
                <div class="qibla-compass-container">
                    <div class="compass-ring">
                        <div class="kaaba-icon">ğŸ•‹</div>
                        <div class="compass-arrow" id="qibla-arrow"></div>
                    </div>
                    <div id="qibla-text" class="stat-value">--Â°</div>
                    <div id="compass-status" class="compass-status" data-i18n="qibla_align">Align arrow to the Kaaba
                    </div>
                    <button id="compass-btn" class="permission-btn" onclick="requestCompassPermission()"
                        style="display: none;" data-i18n="enable_compass">Enable Compass</button>
                </div>
            </section>

            <div class="stats-grid">
                <div class="glass-card stat-card" style="grid-column: span 2;">
                    <div class="stat-label">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10" />
                            <polyline points="12 6 12 12 16 14" />
                        </svg>
                        <span data-i18n="sunrise">Sunrise</span>
                    </div>
                    <div class="stat-value" id="sunrise-time">--:--</div>
                </div>
            </div>
        </div>

        <!-- Quran View -->
        <div id="view-quran" class="view-section">
            <header>
                <div class="location-name" data-i18n="quran">Al-Quran</div>
                <div class="current-prayer" data-i18n="holy_book">Holy Book of Wisdom</div>
            </header>

            <section class="glass-card votd-card" id="votd-container">
                <div class="stat-label" data-i18n="votd">Verse of the Day</div>
                <div id="votd-content" style="margin-top: 15px;">
                    <div class="ayah-arabic" id="votd-arabic">...</div>
                    <div class="ayah-translation" id="votd-translation" style="margin-top: 10px;"
                        data-i18n="votd_loading">Loading daily
                        guidance...</div>
                </div>
            </section>

            <div class="quran-container">
                <select id="sura-selector" class="sura-selector" onchange="loadSura(this.value)">
                    <option value="" data-i18n="select_sura">Select Sura...</option>
                </select>

                <div class="quran-controls">
                    <button class="reader-mode-toggle" onclick="toggleReaderMode()" data-i18n="toggle_reader">Toggle
                        Light/Dark</button>
                    <div class="stat-label"><span data-i18n="show_translit">Show Transliteration</span> <input
                            type="checkbox" id="translit-toggle" onchange="refreshReader()"></div>
                </div>

                <div id="quran-reader" class="quran-reader ayah-list">
                    <!-- Ayahs will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Tasbih View -->
        <div id="view-tasbih" class="view-section">
            <header>
                <div class="location-name" data-i18n="tasbih">Tasbih</div>
                <div class="current-prayer" data-i18n="praise">Praise of the Almighty</div>
            </header>
            <section class="glass-card tasbih-section" onclick="incrementTasbih()">
                <div class="stat-label" data-i18n="counter">Counter</div>
                <div class="tasbih-count" id="tasbih-total">0</div>
                <div class="current-prayer" data-i18n="tap_count">Tap anywhere to count</div>
                <button class="tasbih-btn" onclick="resetTasbih(event)" data-i18n="reset">Reset</button>
            </section>
        </div>

        <footer style="text-align: center; padding: 20px; opacity: 0.5; font-size: 0.8rem;">
            Automatic Prayer Tracker &bull; Powered by Aladhan & AlQuran
        </footer>

        <!-- Settings View -->
        <div id="view-settings" class="view-section">
            <div class="settings-header-tab">
                <div class="settings-title" data-i18n="settings">Settings</div>
            </div>

            <div class="settings-group">
                <div class="settings-label" data-i18n="theme">Theme</div>
                <div class="settings-option" id="theme-dynamic" onclick="setTheme('dynamic')">
                    <span data-i18n="dynamic">Dynamic (Time-based)</span>
                    <div class="check-icon">âœ“</div>
                </div>
                <div class="settings-option" id="theme-light" onclick="setTheme('light')">
                    <span data-i18n="light">Light</span>
                    <div class="check-icon">âœ“</div>
                </div>
                <div class="settings-option" id="theme-dark" onclick="setTheme('dark')">
                    <span data-i18n="dark">Dark</span>
                    <div class="check-icon">âœ“</div>
                </div>
                <div class="settings-option" id="theme-oled" onclick="setTheme('oled')">
                    <span data-i18n="oled">OLED (Black)</span>
                    <div class="check-icon">âœ“</div>
                </div>
            </div>

            <div class="settings-group">
                <div class="settings-label" data-i18n="language">Language</div>
                <select id="lang-selector" class="sura-selector" onchange="setLanguage(this.value)"
                    style="background: var(--glass-bg);">
                    <option value="en">English</option>
                    <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                    <option value="fr">FranÃ§ais</option>
                    <option value="id">Bahasa Indonesia</option>
                    <option value="ur">Ø§Ø±Ø¯Ùˆ</option>
                    <option value="tr">TÃ¼rkÃ§e</option>
                    <option value="es">EspaÃ±ol</option>
                    <option value="de">Deutsch</option>
                    <option value="ms">Bahasa Melayu</option>
                    <option value="fa">ÙØ§Ø±Ø³ÛŒ</option>
                    <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                    <option value="bn">à¦¬à¦¾à¦‚à¦²à¦¾</option>
                    <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                    <option value="zh">ä¸­æ–‡</option>
                    <option value="pt">PortuguÃªs</option>
                    <option value="it">Italiano</option>
                    <option value="nl">Nederlands</option>
                    <option value="sw">Kiswahili</option>
                    <option value="uz">OÊ»zbekcha</option>
                    <option value="ja">æ—¥æœ¬èª</option>
                </select>
            </div>

            <div class="settings-group">
                <div class="settings-label" data-i18n="preferences">Preferences</div>
                <div class="settings-option" onclick="toggleNotifications()">
                    <span data-i18n="notifications">Notifications</span>
                    <span id="notif-status-text">Off</span>
                </div>
                <div class="settings-option" onclick="useAutoLocation()">
                    <span data-i18n="reset_location">Reset to Auto-Location</span>
                </div>
                <div class="settings-option" id="install-app-btn" onclick="installApp()" style="display: none;">
                    <span data-i18n="install_app">Install App</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                </div>
            </div>

            <footer style="text-align: center; margin-top: 40px; opacity: 0.5;">
                Salam v1.5 &bull; Offline Ready
            </footer>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchView('dashboard', this)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
            </svg>
            <span data-i18n="prayer">Prayer</span>
        </div>
        <div class="nav-item" onclick="switchView('quran', this)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
            </svg>
            <span data-i18n="quran">Quran</span>
        </div>
        <div class="nav-item" onclick="switchView('tasbih', this)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10" />
                <path d="M12 6v6l4 2" />
            </svg>
            <span data-i18n="tasbih">Tasbih</span>
        </div>
        <div class="nav-item" onclick="switchView('settings', this)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
            </svg>
            <span data-i18n="settings">Settings</span>
        </div>
    </nav>


    <div id="location-overlay" class="location-search-overlay">
        <div class="close-search" onclick="closeLocationSearch()">âœ•</div>
        <button class="auto-locate-btn" onclick="useAutoLocation()" data-i18n="use_auto">âŠ• Use My Current
            Location</button>
        <div class="search-input-group">
            <input type="text" id="location-input" class="location-input"
                placeholder="Enter city name (e.g. London, Cairo)..."
                onkeyup="if(event.key==='Enter') searchLocation()">
            <button class="permission-btn" onclick="searchLocation()" data-i18n="search_btn">Search</button>
        </div>
        <div id="search-results" class="search-results"></div>
    </div>

    <script>
        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js').then(reg => {
                    console.log('SW Registered');
                    setInterval(() => reg.update(), 60 * 60 * 1000);
                });
            });

            let refreshing = false;
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                if (!refreshing) {
                    refreshing = true;
                    window.location.reload();
                }
            });
        }

        let prayerTimings = {};
        let nextPrayerTime = null;
        let nextPrayerName = "";
        let targetTimezone = "UTC";
        let tasbihCount = localStorage.getItem('tasbihCount') || 0;
        let notificationsEnabled = localStorage.getItem('notificationsEnabled') === 'true';
        let currentLang = localStorage.getItem('language') || 'en';
        let currentTheme = localStorage.getItem('theme') || 'dynamic';
        let qiblaAngle = 0;
        let currentSura = null;
        let readerDarkMode = true;
        let currentCountryCode = localStorage.getItem('countryCode') || null;
        let installPromptEvent = null;

        const methodMap = {
            'us': 2, // ISNA
            'ca': 2, // ISNA
            'gb': 3, // MWL
            'eg': 5, // Egypt
            'sa': 4, // Makkah
            'pk': 1, // Karachi
            'ir': 7, // Tehran
            'kw': 9, // Kuwait
            'qa': 10, // Qatar
            'sg': 11, // Singapore
            'fr': 12, // France
            'tr': 13, // Turkey
            'ru': 14, // Russia
            'ae': 16, // Dubai
            'my': 17, // Malaysia
            'tn': 18, // Tunisia
            'dz': 19, // Algeria
            'id': 20, // Indonesia
            'ma': 21, // Morocco
            'pt': 22, // Portugal
            'jo': 23, // Jordan
            'default': 3 // MWL
        };

        const prayerOrder = ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];
        const gradients = {
            'Fajr': 'linear-gradient(180deg, #0a1128 0%, #1e3a8a 100%)',
            'Sunrise': 'linear-gradient(180deg, #1e3a8a 0%, #7dd3fc 100%)',
            'Dhuhr': 'linear-gradient(180deg, #3b82f6 0%, #60a5fa 100%)',
            'Asr': 'linear-gradient(180deg, #60a5fa 0%, #fbbf24 100%)',
            'Maghrib': 'linear-gradient(180deg, #fb923c 0%, #4c1d95 100%)',
            'Isha': 'linear-gradient(180deg, #1e1b4b 0%, #000000 100%)'
        };

        // Initialize Tasbih
        document.getElementById('tasbih-total').innerText = tasbihCount;

        function switchView(viewId, navItem) {
            document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active'));
            document.getElementById(`view-${viewId}`).classList.add('active');

            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            navItem.classList.add('active');

            if (viewId === 'quran' && !currentSura) {
                initQuran();
            }

            window.scrollTo(0, 0);
        }

        async function initQuran() {
            await Promise.all([loadSuraList(), loadVOTD()]);
        }

        async function loadSuraList() {
            try {
                const res = await fetch('https://api.alquran.cloud/v1/surah');
                const data = await res.json();
                const selector = document.getElementById('sura-selector');
                data.data.forEach(sura => {
                    const opt = document.createElement('option');
                    opt.value = sura.number;
                    opt.innerText = `${sura.number}. ${sura.englishName} (${sura.name})`;
                    selector.appendChild(opt);
                });
            } catch (e) { console.error("Quran List Error:", e); }
        }

        async function loadVOTD() {
            try {
                const randomAyah = Math.floor(Math.random() * 6236) + 1;
                const [arRes, enRes] = await Promise.all([
                    fetch(`https://api.alquran.cloud/v1/ayah/${randomAyah}/ar.alafasy`),
                    fetch(`https://api.alquran.cloud/v1/ayah/${randomAyah}/en.asad`)
                ]);
                const arData = await arRes.json();
                const enData = await enRes.json();

                document.getElementById('votd-arabic').innerText = arData.data.text;
                document.getElementById('votd-translation').innerText = `"${enData.data.text}" â€” [${arData.data.surah.englishName} ${arData.data.numberInSurah}]`;
            } catch (e) { console.error("VOTD Error:", e); }
        }

        async function loadSura(number) {
            if (!number) return;
            const reader = document.getElementById('quran-reader');
            const lang = translations[currentLang] || translations['en'];
            reader.innerHTML = `<div class="stat-value">${lang.loading_sura || 'Loading Sura...'}</div>`;

            try {
                const [arRes, enRes, trRes] = await Promise.all([
                    fetch(`https://api.alquran.cloud/v1/surah/${number}/ar.alafasy`),
                    fetch(`https://api.alquran.cloud/v1/surah/${number}/en.asad`),
                    fetch(`https://api.alquran.cloud/v1/surah/${number}/en.transliteration`)
                ]);

                const ar = await arRes.json();
                const en = await enRes.json();
                const tr = await trRes.json();

                currentSura = { ar: ar.data, en: en.data, tr: tr.data };
                refreshReader();
            } catch (e) { console.error("Sura Load Error:", e); }
        }

        function refreshReader() {
            if (!currentSura) return;
            const reader = document.getElementById('quran-reader');
            const showTr = document.getElementById('translit-toggle').checked;
            reader.innerHTML = '';

            currentSura.ar.ayahs.forEach((ayah, i) => {
                const card = document.createElement('div');
                card.className = 'glass-card ayah-card';
                card.innerHTML = `
                    <div class="ayah-arabic">${ayah.text}</div>
                    ${showTr ? `<div class="ayah-transliteration">${currentSura.tr.ayahs[i].text}</div>` : ''}
                    <div class="ayah-translation">${currentSura.en.ayahs[i].text}</div>
                `;
                reader.appendChild(card);
            });
        }

        function toggleReaderMode() {
            readerDarkMode = !readerDarkMode;
            const reader = document.getElementById('quran-reader');
            if (readerDarkMode) {
                reader.classList.remove('light-mode');
            } else {
                reader.classList.add('light-mode');
            }
        }

        function incrementTasbih() {
            tasbihCount++;
            const totalEl = document.getElementById('tasbih-total');
            totalEl.innerText = tasbihCount;

            // Visual feedback
            totalEl.style.transform = 'scale(1.1)';
            totalEl.style.transition = 'transform 0.1s ease';
            setTimeout(() => {
                totalEl.style.transform = 'scale(1)';
            }, 100);

            localStorage.setItem('tasbihCount', tasbihCount);

            // Enhanced Haptics
            if (window.navigator.vibrate) {
                window.navigator.vibrate([20, 10, 20]);
            }
        }

        function resetTasbih(e) {
            e.stopPropagation();
            tasbihCount = 0;
            document.getElementById('tasbih-total').innerText = tasbihCount;
            localStorage.setItem('tasbihCount', tasbihCount);
        }

        async function toggleNotifications() {
            if (!notificationsEnabled) {
                const permission = await Notification.requestPermission();
                if (permission === 'granted') {
                    notificationsEnabled = true;
                } else {
                    alert("Please enable notifications in your browser settings.");
                    return;
                }
            } else {
                notificationsEnabled = false;
            }
            localStorage.setItem('notificationsEnabled', notificationsEnabled);
            updateNotifBtn();
        }

        function updateNotifBtn() {
            const statusText = document.getElementById('notif-status-text');
            if (statusText) {
                const lang = translations[currentLang] || translations['en'];
                const status = notificationsEnabled ? (lang.on || 'On') : (lang.off || 'Off');
                statusText.innerText = status;
            }
        }

        function format12h(timeStr) {
            if (!timeStr) return "--:--";
            let [h, m] = timeStr.split(':').map(Number);
            const ampm = h >= 12 ? 'PM' : 'AM';
            h = h % 12 || 12;
            return `${h}:${m.toString().padStart(2, '0')} ${ampm}`;
        }

        const translations = {
            en: { prayer: "Prayer", quran: "Quran", tasbih: "Tasbih", settings: "Settings", language: "Language", theme: "Theme", light: "Light", dark: "Dark", oled: "OLED", dynamic: "Dynamic", notifications: "Notifications", preferences: "Preferences", reset_location: "Auto-Location", next: "NEXT", local_time: "Local Time", on: "On", off: "Off", detecting: "Detecting...", change_location: "Change Location", qibla_realtime: "Real-time Qibla", qibla_align: "Align arrow to the Kaaba", qibla_facing: "ğŸ•‹ Facing Kaaba!", enable_compass: "Enable Compass", sunrise: "Sunrise", holy_book: "Holy Book", votd: "Verse of the Day", votd_loading: "Loading guidance...", select_sura: "Select Sura...", toggle_reader: "Toggle Mode", show_translit: "Transliteration", loading_sura: "Loading...", searching: "Searching...", praise: "Praise of Allah", counter: "Counter", tap_count: "Tap to count", reset: "Reset", use_auto: "Use Auto-Location", fajr: "Fajr", dhuhr: "Dhuhr", asr: "Asr", maghrib: "Maghrib", isha: "Isha", error_loc: "Location Error" },
            ar: { prayer: "Ø§Ù„ØµÙ„Ø§Ø©", quran: "Ø§Ù„Ù‚Ø±Ø¢Ù†", tasbih: "ØªØ³Ø¨ÙŠØ­", settings: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª", language: "Ø§Ù„Ù„ØºØ©", theme: "Ø§Ù„Ù…Ø¸Ù‡Ø±", light: "ÙØ§ØªØ­", dark: "Ø¯Ø§ÙƒÙ†", oled: "Ø£Ø³ÙˆØ¯", dynamic: "ØªÙ„Ù‚Ø§Ø¦ÙŠ", notifications: "Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª", preferences: "Ø§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª", reset_location: "Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ", next: "Ø§Ù„Ù‚Ø§Ø¯Ù…", local_time: "Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ù„ÙŠ", on: "ØªØ´ØºÙŠÙ„", off: "Ø¥ÙŠÙ‚Ø§Ù", detecting: "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ¯...", change_location: "ØªØºÙŠÙŠØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹", qibla_realtime: "Ø§Ù„Ù‚Ø¨Ù„Ø© Ù…Ø¨Ø§Ø´Ø±", qibla_align: "Ù‚Ù… Ø¨Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø³Ù‡Ù…", qibla_facing: "ğŸ•‹ Ø£Ù†Øª ØªÙˆØ§Ø¬Ù‡ Ø§Ù„ÙƒØ¹Ø¨Ø©!", enable_compass: "ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨ÙˆØµÙ„Ø©", sunrise: "Ø§Ù„Ø´Ø±ÙˆÙ‚", holy_book: "ÙƒØªØ§Ø¨ Ø§Ù„Ø­ÙƒÙ…Ø©", votd: "Ø¢ÙŠØ© Ø§Ù„ÙŠÙˆÙ…", votd_loading: "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...", select_sura: "Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©...", toggle_reader: "ØªØºÙŠÙŠØ± Ø§Ù„Ù†Ù…Ø·", show_translit: "Ù†Ø·Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø§Øª", loading_sura: "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...", searching: "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...", praise: "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡", counter: "Ø§Ù„Ø¹Ø¯Ø§Ø¯", tap_count: "Ø§Ø¶ØºØ· Ù„Ù„Ø¹Ø¯", reset: "Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†", use_auto: "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ", fajr: "Ø§Ù„ÙØ¬Ø±", dhuhr: "Ø§Ù„Ø¸Ù‡Ø±", asr: "Ø§Ù„Ø¹ØµØ±", maghrib: "Ø§Ù„Ù…ØºØ±Ø¨", isha: "Ø§Ù„Ø¹Ø´Ø§Ø¡", error_loc: "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹" },
            fr: { prayer: "PriÃ¨re", quran: "Coran", tasbih: "Tasbih", settings: "ParamÃ¨tres", language: "Langue", theme: "ThÃ¨me", light: "Clair", dark: "Sombre", oled: "Noir", notifications: "Notifications", preferences: "PrÃ©fÃ©rences", reset_location: "Localisation Auto", next: "SUIVANT", local_time: "Heure locale", on: "On", off: "Off", detecting: "DÃ©tection...", change_location: "Changer lieu", qibla_realtime: "Qibla en direct", qibla_align: "Alignez la flÃ¨che", qibla_facing: "ğŸ•‹ Face Ã  la Kaaba!", enable_compass: "Activer boussole", sunrise: "Lever du soleil", holy_book: "Livre saint", votd: "Verset du jour", votd_loading: "Chargement...", select_sura: "Choisir Sourate...", toggle_reader: "Changer mode", show_translit: "TranslittÃ©ration", loading_sura: "Chargement...", searching: "Recherche...", praise: "Louange Ã  Allah", counter: "Compteur", tap_count: "Appuyez pour compter", reset: "RÃ©initialiser", use_auto: "Localisation Auto", fajr: "Fajr", dhuhr: "Dhuhr", asr: "Asr", maghrib: "Maghrib", isha: "Isha" },
            id: { prayer: "Doa", quran: "Quran", tasbih: "Tasbih", settings: "Pengaturan", language: "Bahasa", theme: "Tema", light: "Terang", dark: "Gelap", oled: "Hitam", notifications: "Notifikasi", preferences: "Preferensi", reset_location: "Lokasi Otomatis", next: "BERIKUTNYA", local_time: "Waktu Lokal", on: "Aktif", off: "Mati", detecting: "Mendeteksi...", change_location: "Ubah Lokasi", qibla_realtime: "Qibla Real-time", qibla_align: "Sejajarkan panah", qibla_facing: "ğŸ•‹ Menghadap Kaabah!", enable_compass: "Aktifkan Kompas", sunrise: "Terbit", holy_book: "Kitab Suci", votd: "Ayat Hari Ini", votd_loading: "Memuat...", select_sura: "Pilih Surah...", toggle_reader: "Ganti Mode", show_translit: "Transliterasi", loading_sura: "Memuat...", searching: "Mencari...", praise: "Pujian bagi Allah", counter: "Penghitung", tap_count: "Ketuk untuk menghitung", reset: "Reset", use_auto: "Lokasi Otomatis", fajr: "Subuh", dhuhr: "Zuhur", asr: "Asar", maghrib: "Magrib", isha: "Isya" },
            ur: { prayer: "Ù†Ù…Ø§Ø²", quran: "Ù‚Ø±Ø¢Ù†", tasbih: "ØªØ³Ø¨ÛŒØ­", settings: "ØªØ±ØªÛŒØ¨Ø§Øª", language: "Ø²Ø¨Ø§Ù†", theme: "ØªÚ¾ÛŒÙ…", light: "ÛÙ„Ú©Ø§", dark: "Ø§Ù†Ø¯Ú¾ÛŒØ±Ø§", oled: "Ø³ÛŒØ§Û", notifications: "Ø§Ø·Ù„Ø§Ø¹Ø§Øª", preferences: "ØªØ±Ø¬ÛŒØ­Ø§Øª", reset_location: "Ø¢Ù¹Ùˆ Ù…Ù‚Ø§Ù…", next: "Ø§Ú¯Ù„Ø§", local_time: "Ù…Ù‚Ø§Ù…ÛŒ ÙˆÙ‚Øª", on: "Ø¢Ù†", off: "Ø¢Ù", detecting: "Ù¾ØªÛ Ù„Ú¯Ø§ Ø±ÛØ§ ÛÛ’...", change_location: "Ù…Ù‚Ø§Ù… ØªØ¨Ø¯ÛŒÙ„ Ú©Ø±ÛŒÚº", qibla_realtime: "Ù‚Ø¨Ù„Û Ù„Ø§Ø¦ÛŒÙˆ", qibla_align: "ØªÛŒØ± Ú©Ùˆ Ø³ÛŒØ¯Ú¾Ø§ Ú©Ø±ÛŒÚº", qibla_facing: "ğŸ•‹ Ø¢Ù¾ Ú©Ø§ Ø±Ø® Ú©Ø¹Ø¨Û Ú©ÛŒ Ø·Ø±Ù ÛÛ’!", enable_compass: "Ú©Ù…Ù¾Ø§Ø³ ÙØ¹Ø§Ù„ Ú©Ø±ÛŒÚº", sunrise: "Ø·Ù„ÙˆØ¹ Ø¢ÙØªØ§Ø¨", holy_book: "Ø­Ú©Ù…Øª Ú©ÛŒ Ú©ØªØ§Ø¨", votd: "Ø¢Ø¬ Ú©ÛŒ Ø¢ÛŒØª", votd_loading: "Ù„ÙˆÚˆ ÛÙˆ Ø±ÛØ§ ÛÛ’...", select_sura: "Ø³ÙˆØ±Û Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº...", toggle_reader: "Ù…ÙˆÚˆ ØªØ¨Ø¯ÛŒÙ„ Ú©Ø±ÛŒÚº", show_translit: "Ù†Ø·Ù‚", loading_sura: "Ù„ÙˆÚˆ ÛÙˆ Ø±ÛØ§ ÛÛ’...", searching: "ØªÙ„Ø§Ø´ Ú©Ø± Ø±ÛØ§ ÛÛ’...", praise: "Ø§Ù„Ù„Û Ú©ÛŒ ØªØ¹Ø±ÛŒÙ", counter: "Ú©Ø§Ø¤Ù†Ù¹Ø±", tap_count: "Ú¯Ù†Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø¯Ø¨Ø§Ø¦ÛŒÚº", reset: "Ø±ÛŒ Ø³ÛŒÙ¹", use_auto: "Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ù‚Ø§Ù…", fajr: "ÙØ¬Ø±", dhuhr: "Ø¸ÛØ±", asr: "Ø¹ØµØ±", maghrib: "Ù…ØºØ±Ø¨", isha: "Ø¹Ø´Ø§Ø¡" },
            tr: { prayer: "Namaz", quran: "Kuran", tasbih: "Tesbih", settings: "Ayarlar", language: "Dil", theme: "Tema", light: "AÃ§Ä±k", dark: "Koyu", oled: "Siyah", notifications: "Bildirimler", preferences: "Tercihler", reset_location: "Otomatik Konum", next: "SONRAKÄ°", local_time: "Yerel Saat", on: "AÃ§Ä±k", off: "KapalÄ±", detecting: "Tespit ediliyor...", change_location: "Konumu DeÄŸiÅŸtir", qibla_realtime: "CanlÄ± KÄ±ble", qibla_align: "Oku hizalayÄ±n", qibla_facing: "ğŸ•‹ Kabe'ye bakÄ±yorsunuz!", enable_compass: "PusulayÄ± AÃ§", sunrise: "GÃ¼n DoÄŸumu", holy_book: "Hikmet KitabÄ±", votd: "GÃ¼nÃ¼n Ayeti", votd_loading: "YÃ¼kleniyor...", select_sura: "Sure SeÃ§...", toggle_reader: "Modu DeÄŸiÅŸtir", show_translit: "Transliterasyon", loading_sura: "YÃ¼kleniyor...", searching: "AranÄ±yor...", praise: "Allah'a hamdolsun", counter: "SayaÃ§", tap_count: "Saymak iÃ§in dokun", reset: "SÄ±fÄ±rla", use_auto: "Otomatik Konum", fajr: "Ä°msak", dhuhr: "Ã–ÄŸle", asr: "Ä°kindi", maghrib: "AkÅŸam", isha: "YatsÄ±" },
            es: { prayer: "OraciÃ³n", quran: "CorÃ¡n", tasbih: "Tasbih", settings: "Ajustes", language: "Idioma", theme: "Tema", light: "Claro", dark: "Oscuro", oled: "Negro", notifications: "Notificaciones", preferences: "Preferencias", reset_location: "UbicaciÃ³n Auto", next: "SIGUIENTE", local_time: "Hora local", on: "On", off: "Off", detecting: "Detectando...", change_location: "Cambiar ubicaciÃ³n", qibla_realtime: "Qibla en vivo", qibla_align: "Alinea la flecha", qibla_facing: "ğŸ•‹ Â¡Frente a la Kaaba!", enable_compass: "Activar brÃºjula", sunrise: "Amanecer", holy_book: "Libro Sagrado", votd: "VersÃ­culo del dÃ­a", votd_loading: "Cargando...", select_sura: "Elegir Sura...", toggle_reader: "Cambiar modo", show_translit: "TransliteraciÃ³n", loading_sura: "Cargando...", searching: "Buscando...", praise: "Alabanza a Allah", counter: "Contador", tap_count: "Toca para contar", reset: "Reiniciar", use_auto: "UbicaciÃ³n Auto", fajr: "Fajr", dhuhr: "Dhuhr", asr: "Asr", maghrib: "Maghrib", isha: "Isha" },
            de: { prayer: "Gebet", quran: "Koran", tasbih: "Tasbih", settings: "Einstellungen", language: "Sprache", theme: "Thema", light: "Hell", dark: "Dunkel", oled: "Schwarz", notifications: "Benachrichtigungen", preferences: "PrÃ¤ferenzen", reset_location: "Auto-Standort", next: "NÃ„CHSTE", local_time: "Ortszeit", on: "An", off: "Aus", detecting: "Erkennen...", change_location: "Standort Ã¤ndern", qibla_realtime: "Echtzeit-Qibla", qibla_align: "Pfeil ausrichten", qibla_facing: "ğŸ•‹ Zur Kaaba gewandt!", enable_compass: "Kompass aktivieren", sunrise: "Sonnenaufgang", holy_book: "Heiliges Buch", votd: "Vers des Tages", votd_loading: "Laden...", select_sura: "Sure wÃ¤hlen...", toggle_reader: "Modus umschalten", show_translit: "Transliteration", loading_sura: "Laden...", searching: "Suchen...", praise: "Lob sei Allah", counter: "ZÃ¤hler", tap_count: "Zum ZÃ¤hlen tippen", reset: "ZurÃ¼cksetzen", use_auto: "Auto-Standort", fajr: "Fajr", dhuhr: "Dhuhr", asr: "Asr", maghrib: "Maghrib", isha: "Isha" },
            ms: { prayer: "Solat", quran: "Quran", tasbih: "Tasbih", settings: "Tetapan", language: "Bahasa", theme: "Tema", light: "Cerah", dark: "Gelap", oled: "Hitam", notifications: "Notifikasi", preferences: "Pilihan", reset_location: "Lokasi Auto", next: "SETERUSNYA", local_time: "Waktu Tempatan", on: "Aktif", off: "Mati", detecting: "Mengesan...", change_location: "Tukar Lokasi", qibla_realtime: "Qibla Terus", qibla_align: "Selaraskan anak panah", qibla_facing: "ğŸ•‹ Menghadap Kaabah!", enable_compass: "Aktifkan Kompas", sunrise: "Syuruk", holy_book: "Kitab Suci", votd: "Ayat Hari Ini", votd_loading: "Memuatkan...", select_sura: "Pilih Surah...", toggle_reader: "Tukar Mod", show_translit: "Transliterasi", loading_sura: "Memuatkan...", searching: "Mencari...", praise: "Pujian bagi Allah", counter: "Penghitung", tap_count: "Ketik untuk mengira", reset: "Set semula", use_auto: "Lokasi Auto", fajr: "Subuh", dhuhr: "Zohor", asr: "Asar", maghrib: "Maghrib", isha: "Isyak" },
            fa: { prayer: "Ù†Ù…Ø§Ø²", quran: "Ù‚Ø±Ø¢Ù†", tasbih: "ØªØ³Ø¨ÛŒØ­", settings: "ØªÙ†Ø¸ÛŒÙ…Ø§Øª", language: "Ø²Ø¨Ø§Ù†", theme: "ØªÙ…", light: "Ø±ÙˆØ´Ù†", dark: "ØªØ§Ø±ÛŒÚ©", oled: "Ø³ÛŒØ§Ù‡", notifications: "Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§", preferences: "ØªØ±Ø¬ÛŒØ­Ø§Øª", reset_location: "Ù…ÙˆÙ‚Ø¹ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø±", next: "Ø¨Ø¹Ø¯ÛŒ", local_time: "Ø²Ù…Ø§Ù† Ù…Ø­Ù„ÛŒ", on: "Ø±ÙˆØ´Ù†", off: "Ø®Ø§Ù…ÙˆØ´", detecting: "Ø¯Ø± Ø­Ø§Ù„ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ...", change_location: "ØªØºÛŒÛŒØ± Ù…Ú©Ø§Ù†", qibla_realtime: "Ù‚Ø¨Ù„Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ…", qibla_align: "Ù¾ÛŒÚ©Ø§Ù† Ø±Ø§ ØªØ±Ø§Ø² Ú©Ù†ÛŒØ¯", qibla_facing: "ğŸ•‹ Ø´Ù…Ø§ Ø±Ùˆ Ø¨Ù‡ Ú©Ø¹Ø¨Ù‡ Ù‡Ø³ØªÛŒØ¯!", enable_compass: "ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ù‚Ø·Ø¨â€ŒÙ†Ù…Ø§", sunrise: "Ø·Ù„ÙˆØ¹", holy_book: "Ú©ØªØ§Ø¨ Ø­Ú©Ù…Øª", votd: "Ø¢ÛŒÙ‡ Ø§Ù…Ø±ÙˆØ²", votd_loading: "Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...", select_sura: "Ø§Ù†ØªØ®Ø§Ø¨ Ø³ÙˆØ±Ù‡...", toggle_reader: "ØªØºÛŒÛŒØ± Ø­Ø§Ù„Øª", show_translit: "Ø¢ÙˆØ§Ù†ÙˆÛŒØ³ÛŒ", loading_sura: "Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...", searching: "Ø¯Ø± Ø­Ø§Ù„ Ø¬Ø³ØªØ¬Ùˆ...", praise: "Ø³ØªØ§ÛŒØ´ Ø§Ù„Ù„Ù‡", counter: "Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡", tap_count: "Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§Ø±Ø´ Ø¶Ø±Ø¨Ù‡ Ø¨Ø²Ù†ÛŒØ¯", reset: "Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ", use_auto: "Ù…ÙˆÙ‚Ø¹ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø±", fajr: "ÙØ¬Ø±", dhuhr: "Ø¸Ù‡Ø±", asr: "Ø¹ØµØ±", maghrib: "Ù…ØºØ±Ø¨", isha: "Ø¹Ø´Ø§" },
            ru: { prayer: "ĞœĞ¾Ğ»Ğ¸Ñ‚Ğ²Ğ°", quran: "ĞšĞ¾Ñ€Ğ°Ğ½", tasbih: "Ğ¢Ğ°ÑĞ±Ğ¸Ñ…", settings: "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸", language: "Ğ¯Ğ·Ñ‹Ğº", theme: "Ğ¢ĞµĞ¼Ğ°", light: "Ğ¡Ğ²ĞµÑ‚Ğ»Ğ°Ñ", dark: "Ğ¢ĞµĞ¼Ğ½Ğ°Ñ", oled: "Ğ§ĞµÑ€Ğ½Ğ°Ñ", notifications: "Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ", preferences: "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸", reset_location: "ĞĞ²Ñ‚Ğ¾-Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ", next: "Ğ¡Ğ›Ğ•Ğ”", local_time: "ĞœĞµÑÑ‚Ğ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ", on: "Ğ’ĞºĞ»", off: "Ğ’Ñ‹ĞºĞ»", detecting: "ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ...", change_location: "Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑÑ‚Ğ¾", qibla_realtime: "ĞšĞ¸Ğ±Ğ»Ğ° Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½", qibla_align: "ĞĞ°Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ ÑÑ‚Ñ€ĞµĞ»ĞºÑƒ", qibla_facing: "ğŸ•‹ Ğ’Ñ‹ ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ñ‚Ğµ Ğ½Ğ° ĞšĞ°Ğ°Ğ±Ñƒ!", enable_compass: "Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ñ", sunrise: "Ğ’Ğ¾ÑÑ…Ğ¾Ğ´", holy_book: "Ğ¡Ğ²ÑÑ‰ĞµĞ½Ğ½Ğ°Ñ ĞšĞ½Ğ¸Ğ³Ğ°", votd: "ĞÑÑ‚ Ğ´Ğ½Ñ", votd_loading: "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...", select_sura: "Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¡ÑƒÑ€Ñƒ...", toggle_reader: "Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ¶Ğ¸Ğ¼", show_translit: "Ğ¢Ñ€Ğ°Ğ½ÑĞ»Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ñ", loading_sura: "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...", searching: "ĞŸĞ¾Ğ¸ÑĞº...", praise: "Ğ¥Ğ²Ğ°Ğ»Ğ° ĞĞ»Ğ»Ğ°Ñ…Ñƒ", counter: "Ğ¡Ñ‡ĞµÑ‚Ñ‡Ğ¸Ğº", tap_count: "ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ´Ğ»Ñ ÑÑ‡ĞµÑ‚Ğ°", reset: "Ğ¡Ğ±Ñ€Ğ¾Ñ", use_auto: "ĞĞ²Ñ‚Ğ¾-Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ", fajr: "Ğ¤Ğ°Ğ´Ğ¶Ñ€", dhuhr: "Ğ—ÑƒÑ…Ñ€", asr: "ĞÑÑ€", maghrib: "ĞœĞ°Ğ³Ñ€Ğ¸Ğ±", isha: "Ğ˜ÑˆĞ°" },
            bn: { prayer: "à¦¨à¦¾à¦®à¦¾à¦œ", quran: "à¦•à§à¦°à¦†à¦¨", tasbih: "à¦¤à¦¸à¦¬à¦¿à¦¹", settings: "à¦¸à§‡à¦Ÿà¦¿à¦‚à¦¸", language: "à¦­à¦¾à¦·à¦¾", theme: "à¦¥à¦¿à¦®", light: "à¦¹à¦¾à¦²à¦•à¦¾", dark: "à¦—à¦¾à§", oled: "à¦•à¦¾à¦²à§‹", notifications: "à¦¨à§‹à¦Ÿà¦¿à¦«à¦¿à¦•à§‡à¦¶à¦¨", preferences: "à¦ªà¦›à¦¨à§à¦¦", reset_location: "à¦¸à§à¦¬à¦¯à¦¼à¦‚à¦•à§à¦°à¦¿à¦¯à¦¼ à¦…à¦¬à¦¸à§à¦¥à¦¾à¦¨", next: "à¦ªà¦°à¦¬à¦°à§à¦¤à§€", local_time: "à¦¸à§à¦¥à¦¾à¦¨à§€à¦¯à¦¼ à¦¸à¦®à¦¯à¦¼", on: "à¦šà¦¾à¦²à§", off: "à¦¬à¦¨à§à¦§", detecting: "à¦¸à¦¨à¦¾à¦•à§à¦¤ à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡...", change_location: "à¦…à¦¬à¦¸à§à¦¥à¦¾à¦¨ à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨", qibla_realtime: "à¦•à¦¿à¦¬à¦¾ à¦²à¦¾à¦‡à¦­", qibla_align: "à¦¤à§€à¦°à¦Ÿà¦¿ à¦¸à§‹à¦œà¦¾ à¦•à¦°à§à¦¨", qibla_facing: "ğŸ•‹ à¦†à¦ªà¦¨à¦¿ à¦•à¦¾à¦¬à¦¾à¦° à¦¦à¦¿à¦•à§‡ à¦®à§à¦– à¦•à¦°à§‡ à¦†à¦›à§‡à¦¨!", enable_compass: "à¦•à¦®à§à¦ªà¦¾à¦¸ à¦šà¦¾à¦²à§ à¦•à¦°à§à¦¨", sunrise: "à¦¸à§‚à¦°à§à¦¯à§‹à¦¦à¦¯à¦¼", holy_book: "à¦ªà§à¦°à¦œà§à¦à¦¾à¦° à¦¬à¦‡", votd: "à¦†à¦œà¦•à§‡à¦° à¦†à¦¯à¦¼à¦¾à¦¤", votd_loading: "à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...", select_sura: "à¦¸à§‚à¦°à¦¾ à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨...", toggle_reader: "à¦®à§‹à¦¡ à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨", show_translit: "à¦‰à¦šà§à¦šà¦¾à¦°à¦£", loading_sura: "à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...", searching: "à¦–à§‹à¦à¦œà¦¾ à¦¹à¦šà§à¦›à§‡...", praise: "à¦†à¦²à§à¦²à¦¾à¦¹à¦° à¦ªà§à¦°à¦¶à¦‚à¦¸à¦¾", counter: "à¦•à¦¾à¦‰à¦¨à§à¦Ÿà¦¾à¦°", tap_count: "à¦—à¦£à¦¨à¦¾ à¦•à¦°à¦¤à§‡ à¦šà¦¾à¦ªà§à¦¨", reset: "à¦°à¦¿à¦¸à§‡à¦Ÿ", use_auto: "à¦¸à§à¦¬à¦¯à¦¼à¦‚à¦•à§à¦°à¦¿à¦¯à¦¼ à¦…à¦¬à¦¸à§à¦¥à¦¾à¦¨", fajr: "à¦«à¦œà¦°", dhuhr: "à¦¯à§‹à¦¹à¦°", asr: "à¦†à¦¸à¦°", maghrib: "à¦®à¦¾à¦—à¦°à¦¿à¦¬", isha: "à¦à¦¶à¦¾" },
            hi: { prayer: "à¤ªà¥à¤°à¤¾à¤°à¥à¤¥à¤¨à¤¾", quran: "à¤•à¥à¤°à¤¾à¤¨", tasbih: "à¤¤à¤¸à¥à¤¬à¥€à¤¹", settings: "à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—à¥à¤¸", language: "à¤­à¤¾à¤·à¤¾", theme: "à¤¥à¥€à¤®", light: "à¤¹à¤²à¥à¤•à¤¾", dark: "à¤¡à¤¾à¤°à¥à¤•", oled: "à¤•à¤¾à¤²à¤¾", notifications: "à¤¸à¥‚à¤šà¤¨à¤¾à¤à¤‚", preferences: "à¤µà¤°à¥€à¤¯à¤¤à¤¾à¤à¤", reset_location: "à¤‘à¤Ÿà¥‹-à¤²à¥‹à¤•à¥‡à¤¶à¤¨", next: "à¤…à¤—à¤²à¤¾", local_time: "à¤¸à¥à¤¥à¤¾à¤¨à¥€à¤¯ à¤¸à¤®à¤¯", on: "à¤šà¤¾à¤²à¥‚", off: "à¤¬à¤‚à¤¦", detecting: "à¤…à¤¨à¥à¤°à¥‹à¤§...", change_location: "à¤¸à¥à¤¥à¤¾à¤¨ à¤¬à¤¦à¤²à¥‡à¤‚", qibla_realtime: "à¤•à¤¿à¤¬à¤²à¤¾ à¤²à¤¾à¤‡à¤µ", qibla_align: "à¤¤à¥€à¤° à¤¸à¤‚à¤°à¥‡à¤–à¤¿à¤¤ à¤•à¤°à¥‡à¤‚", qibla_facing: "ğŸ•‹ à¤†à¤ªà¤•à¤¾ à¤®à¥à¤– à¤•à¤¾à¤¬à¤¾ à¤•à¥€ à¤“à¤° à¤¹à¥ˆ!", enable_compass: "à¤•à¤®à¥à¤ªà¤¾à¤¸ à¤¸à¤•à¥à¤·à¤® à¤•à¤°à¥‡à¤‚", sunrise: "à¤¸à¥‚à¤°à¥à¤¯à¥‹à¤¦à¤¯", holy_book: "à¤œà¥à¤à¤¾à¤¨ à¤•à¥€ à¤ªà¥à¤¸à¥à¤¤à¤•", votd: "à¤†à¤œ à¤•à¥€ à¤†à¤¯à¤¤", votd_loading: "à¤²à¥‹à¤¹à¥‡à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...", select_sura: "à¤¸à¥‚à¤°à¤¾ à¤šà¥à¤¨à¥‡à¤‚...", toggle_reader: "à¤®à¥‹à¤¡ à¤¬à¤¦à¤²à¥‡à¤‚", show_translit: "à¤²à¤¿à¤ªà¥à¤¯à¤‚à¤¤à¤°à¤£", loading_sura: "à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...", searching: "à¤–à¥‹à¤œ à¤°à¤¹à¤¾ à¤¹à¥ˆ...", praise: "à¤…à¤²à¥à¤²à¤¾à¤¹ à¤•à¥€ à¤ªà¥à¤°à¤¶à¤‚à¤¸à¤¾", counter: "à¤•à¤¾à¤‰à¤‚à¤Ÿà¤°", tap_count: "à¤—à¤¿à¤¨à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤Ÿà¥ˆà¤ª à¤•à¤°à¥‡à¤‚", reset: "à¤°à¥€à¤¸à¥‡à¤Ÿ", use_auto: "à¤‘à¤Ÿà¥‹-à¤²à¥‹à¤•à¥‡à¤¶à¤¨", fajr: "à¤«à¤œà¥à¤°", dhuhr: "à¤§à¥à¤¹à¥à¤°", asr: "à¤…à¤¸à¥à¤°", maghrib: "à¤®à¤—à¤¼à¤°à¤¿à¤¬", isha: "à¤ˆà¤¶à¤¾" },
            zh: { prayer: "ç¥·å‘Š", quran: "å¤å…°ç»", tasbih: "æ³°æ–¯æ¯”å“ˆ", settings: "è®¾ç½®", language: "è¯­è¨€", theme: "ä¸»é¢˜", light: "æµ…è‰²", dark: "æ·±è‰²", oled: "é»‘è‰²", notifications: "é€šçŸ¥", preferences: "åå¥½", reset_location: "è‡ªåŠ¨å®šä½", next: "ä¸‹ä¸€æ¬¡", local_time: "å½“åœ°æ—¶é—´", on: "å¼€å¯", off: "å…³é—­", detecting: "æ£€æµ‹ä¸­...", change_location: "æ›´æ”¹ä½ç½®", qibla_realtime: "å®æ—¶æœå‘", qibla_align: "å¯¹é½ç®­å¤´", qibla_facing: "ğŸ•‹ é¢å¯¹å…‹å°”ç™½ï¼", enable_compass: "å¯ç”¨ç½—ç›˜", sunrise: "æ—¥å‡º", holy_book: "æ™ºæ…§ä¹‹ä¹¦", votd: "ä»Šæ—¥ç»æ–‡", votd_loading: "åŠ è½½ä¸­...", select_sura: "é€‰æ‹©è‹æ‹‰...", toggle_reader: "åˆ‡æ¢æ¨¡å¼", show_translit: "éŸ³è¯‘", loading_sura: "åŠ è½½ä¸­...", searching: "æœç´¢ä¸­...", praise: "èµç¾çœŸä¸»", counter: "è®¡æ•°å™¨", tap_count: "ç‚¹å‡»è®¡æ•°", reset: "é‡ç½®", use_auto: "è‡ªåŠ¨å®šä½", fajr: "æ™¨ç¤¼", dhuhr: "æ™Œç¤¼", asr: "æ™¡ç¤¼", maghrib: "æ˜ç¤¼", isha: "å®µç¤¼" },
            pt: { prayer: "OraÃ§Ã£o", quran: "AlcorÃ£o", tasbih: "Tasbih", settings: "ConfiguraÃ§Ãµes", language: "Idioma", theme: "Tema", light: "Claro", dark: "Escuro", oled: "Preto", notifications: "NotificaÃ§Ãµes", preferences: "PreferÃªncias", reset_location: "LocalizaÃ§Ã£o Auto", next: "PRÃ“XIMO", local_time: "Hora local", on: "Ligado", off: "Desligado", detecting: "Detetando...", change_location: "Mudar local", qibla_realtime: "Qibla ao vivo", qibla_align: "Alinhe a seta", qibla_facing: "ğŸ•‹ De frente para a Kaaba!", enable_compass: "Ativar bÃºssola", sunrise: "Nascer do sol", holy_book: "Livro Sagrado", votd: "VersÃ­culo do dia", votd_loading: "A carregar...", select_sura: "Escolher Sura...", toggle_reader: "Mudar modo", show_translit: "TransliteraÃ§Ã£o", loading_sura: "A carregar...", searching: "A procurar...", praise: "Louvado seja Allah", counter: "Contador", tap_count: "Toque para contar", reset: "Reiniciar", use_auto: "LocalizaÃ§Ã£o Auto", fajr: "Fajr", dhuhr: "Dhuhr", asr: "Asr", maghrib: "Maghrib", isha: "Isha" },
            it: { prayer: "Preghiera", quran: "Corano", tasbih: "Tasbih", settings: "Impostazioni", language: "Lingua", theme: "Tema", light: "Chiaro", dark: "Scuro", oled: "Nero", notifications: "Notifiche", preferences: "Preferenze", reset_location: "Posizione Auto", next: "PROSSIMO", local_time: "Ora locale", on: "On", off: "Off", detecting: "Rilevamento...", change_location: "Cambia luogo", qibla_realtime: "Qibla live", qibla_align: "Allinea la freccia", qibla_facing: "ğŸ•‹ Di fronte alla Kaaba!", enable_compass: "Attiva bussola", sunrise: "Alba", holy_book: "Libro Sacro", votd: "Versetto del giorno", votd_loading: "Caricamento...", select_sura: "Scegli Sura...", toggle_reader: "Cambia modalitÃ ", show_translit: "Traslitterazione", loading_sura: "Caricamento...", searching: "Ricerca...", praise: "Gloria a Allah", counter: "Contatore", tap_count: "Tocca per contare", reset: "Reset", use_auto: "Posizione Auto", fajr: "Fajr", dhuhr: "Dhuhr", asr: "Asr", maghrib: "Maghrib", isha: "Isha" },
            nl: { prayer: "Gebed", quran: "Koran", tasbih: "Tasbih", settings: "Instellingen", language: "Taal", theme: "Thema", light: "Licht", dark: "Donker", oled: "Zwart", notifications: "Meldingen", preferences: "Voorkeuren", reset_location: "Auto-locatie", next: "VOLGENDE", local_time: "Lokale tijd", on: "Aan", off: "Uit", detecting: "Detecteren...", change_location: "Wijzig locatie", qibla_realtime: "Live Qibla", qibla_align: "Lijn de pijl uit", qibla_facing: "ğŸ•‹ Naar de Kaaba gekeerd!", enable_compass: "Kompas activeren", sunrise: "Zonsopgang", holy_book: "Heilig Boek", votd: "Vers van de dag", votd_loading: "Laden...", select_sura: "Kies Soera...", toggle_reader: "Wissel modus", show_translit: "Transliteratie", loading_sura: "Laden...", searching: "Zoeken...", praise: "Lof zij Allah", counter: "Teller", tap_count: "Tik om te tellen", reset: "Reset", use_auto: "Auto-locatie", fajr: "Fajr", dhuhr: "Dhuhr", asr: "Asr", maghrib: "Maghrib", isha: "Isha" },
            sw: { prayer: "Sala", quran: "Kurani", tasbih: "Tasbih", settings: "Mipangilio", language: "Lugha", theme: "Mandhari", light: "Mkali", dark: "Giza", oled: "Nyeusi", notifications: "Arifa", preferences: "Mapendeleo", reset_location: "Mahali Auto", next: "IFUATAYO", local_time: "Saa za mtaa", on: "On", off: "Off", detecting: "Kugundua...", change_location: "Badilisha Mahali", qibla_realtime: "Qibla Moja kwa Moja", qibla_align: "Sawazisha mshale", qibla_facing: "ğŸ•‹ Unaelekea Kaaba!", enable_compass: "Washa Kompasi", sunrise: "Kuchomoza jua", holy_book: "Kitabu cha Hekima", votd: "Aya ya Siku", votd_loading: "Inapakia...", select_sura: "Chagua Surah...", toggle_reader: "Badili Mode", show_translit: "Kutamka", loading_sura: "Inapakia...", searching: "Inatafuta...", praise: "Sifa kwa Allah", counter: "Kikokotoo", tap_count: "Gusa ili kuhesabu", reset: "Weka upya", use_auto: "Mahali Auto", fajr: "Fajr", dhuhr: "Dhuhr", asr: "Asr", maghrib: "Maghrib", isha: "Isha", install_app: "Sakinisha Programu" },
            uz: { prayer: "Namoz", quran: "Quron", tasbih: "Tasbih", settings: "Sozlamalar", language: "Til", theme: "Mavzu", light: "Yorug'", dark: "Qorong'u", oled: "Qora", notifications: "Bildirishnomalar", preferences: "Afzalliklar", reset_location: "Avto-joylashuv", next: "KEYINGI", local_time: "Mahalliy vaqt", on: "Yoniq", off: "O'chiq", detecting: "Aniqlanmoqda...", change_location: "Joyni o'zgartirish", qibla_realtime: "Jonli Qibla", qibla_align: "O'qni to'g'rilang", qibla_facing: "ğŸ•‹ Ka'baga yuzlandingiz!", enable_compass: "Kompasni yoqish", sunrise: "Quyosh chiqishi", holy_book: "Hikmat kitobi", votd: "Kun oyati", votd_loading: "Yuklanmoqda...", select_sura: "Surani tanlang...", toggle_reader: "Rejimni o'zgartirish", show_translit: "Transliteratsiya", loading_sura: "Yuklanmoqda...", searching: "Qidirilmoqda...", praise: "Allohga hamd bo'lsin", counter: "Hisoblagich", tap_count: "Hisoblash uchun bosing", reset: "Tiklash", use_auto: "Avto-joylashuv", fajr: "Bomdod", dhuhr: "Peshin", asr: "Asr", maghrib: "Shom", isha: "Xufton", install_app: "Ilovani o'rnatish" },
            ja: { prayer: "ç¤¼æ‹", quran: "ã‚³ãƒ¼ãƒ©ãƒ³", tasbih: "ã‚¿ã‚¹ãƒ“h", settings: "è¨­å®š", language: "è¨€èª", theme: "ãƒ†ãƒ¼ãƒ", light: "ãƒ©ã‚¤ãƒˆ", dark: "ãƒ€ãƒ¼ã‚¯", oled: "ãƒ–ãƒ©ãƒƒã‚¯", notifications: "é€šçŸ¥", preferences: "è¨­å®š", reset_location: "è‡ªå‹•ä½ç½®", next: "æ¬¡", local_time: "ç¾åœ°æ™‚é–“", on: "ã‚ªãƒ³", off: "ã‚ªãƒ•", detecting: "æ¤œå‡ºä¸­...", change_location: "å ´æ‰€ã‚’å¤‰æ›´", qibla_realtime: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚­ãƒ–ãƒ©", qibla_align: "çŸ¢å°ã‚’åˆã‚ã›ã‚‹", qibla_facing: "ğŸ•‹ ã‚«ã‚¢ãƒã«é¢ã—ã¦ã„ã¾ã™ï¼", enable_compass: "ã‚³ãƒ³ãƒ‘ã‚¹ã‚’æœ‰åŠ¹ã«ã™ã‚‹", sunrise: "æ—¥ã®å‡º", holy_book: "çŸ¥æµã®æ›¸", votd: "ä»Šæ—¥ã®ç¯€", votd_loading: "èª­ã¿è¾¼ã¿ä¸­...", select_sura: "ã‚¹ãƒ¼ãƒ©ã‚’é¸æŠ...", toggle_reader: "ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ", show_translit: "ç¿»å­—", loading_sura: "èª­ã¿è¾¼ã¿ä¸­...", searching: "æ¤œç´¢ä¸­...", praise: "ã‚¢ãƒƒãƒ©ãƒ¼ã«ç§°è³›ã‚’", counter: "ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼", tap_count: "ã‚¿ãƒƒãƒ—ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆ", reset: "ãƒªã‚»ãƒƒãƒˆ", use_auto: "è‡ªå‹•ä½ç½®", fajr: "ãƒ•ã‚¡ã‚¸ãƒ«", dhuhr: "ã‚ºãƒ•ãƒ«", asr: "ã‚¢ã‚¹ãƒ«", maghrib: "ãƒã‚°ãƒªãƒ–", isha: "ã‚¤ã‚·ãƒ£ãƒ¼", install_app: "ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" }
        };

        // Translations fallback for other languages to ensure key exists
        translations['en'].install_app = "Install App";
        translations['ar'].install_app = "ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚";
        translations['fr'].install_app = "Installer l'app";
        translations['id'].install_app = "Instal Aplikasi";
        translations['ur'].install_app = "Ø§ÛŒÙ¾ Ø§Ù†Ø³Ù¹Ø§Ù„ Ú©Ø±ÛŒÚº";
        translations['tr'].install_app = "UygulamayÄ± YÃ¼kle";
        translations['es'].install_app = "Instalar App";
        translations['de'].install_app = "App installieren";
        translations['ms'].install_app = "Pasang Apl";
        translations['fa'].install_app = "Ù†ØµØ¨ Ø¨Ø±Ù†Ø§Ù…Ù‡";
        translations['ru'].install_app = "Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ";
        translations['bn'].install_app = "à¦…à§à¦¯à¦¾à¦ª à¦‡à¦¨à¦¸à§à¦Ÿà¦² à¦•à¦°à§à¦¨";
        translations['hi'].install_app = "à¤à¤ª à¤‡à¤‚à¤¸à¥à¤Ÿà¥‰à¤² à¤•à¤°à¥‡à¤‚";
        translations['zh'].install_app = "å®‰è£…åº”ç”¨";
        translations['pt'].install_app = "Instalar App";
        translations['it'].install_app = "Installa App";
        translations['nl'].install_app = "Installeer App";

        function applyTranslations() {
            const lang = translations[currentLang] || translations['en'];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (lang[key]) {
                    // Specific handling for 'next' to preserve colon
                    if (key === 'next') el.innerText = lang[key];
                    else el.innerText = lang[key];
                }
            });
            document.documentElement.dir = (currentLang === 'ar' || currentLang === 'ur' || currentLang === 'fa') ? 'rtl' : 'ltr';
            const selector = document.getElementById('lang-selector');
            if (selector) selector.value = currentLang;

            // Update dynamic elements immediately
            updateNotifBtn();
            if (prayerTimings.Fajr) updateCountdown();
        }

        function toggleSettings(show) {
            const overlay = document.getElementById('settings-overlay');
            overlay.classList.toggle('active', show);
            if (show) updateNotifBtn();
        }

        function setTheme(theme) {
            currentTheme = theme;
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            document.querySelectorAll('.settings-option').forEach(opt => opt.classList.remove('active'));
            document.getElementById(`theme-${theme}`).classList.add('active');
        }

        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('language', lang);
            applyTranslations();
            // Removed location.reload() to prevent hangs and race conditions
        }

        async function init() {
            try {
                setTheme(currentTheme);
                applyTranslations();
                updateNotifBtn();

                const savedLoc = localStorage.getItem('manualLocation');
                let coords;

                if (savedLoc) {
                    coords = JSON.parse(savedLoc);
                    document.getElementById('city-name').innerText = coords.name;
                    // If we have manual location, we should rely on stored country code or fetch it if missing
                    if (!currentCountryCode) {
                        await fetchCityName(coords.latitude, coords.longitude);
                    }
                } else {
                    const position = await getPosition();
                    coords = { latitude: position.coords.latitude, longitude: position.coords.longitude };
                    // Fetch location name (Reverse Geocoding)
                    await fetchCityName(coords.latitude, coords.longitude);
                }

                calculateQibla(coords.latitude, coords.longitude);

                if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                    document.getElementById('compass-btn').style.display = 'block';
                } else {
                    window.addEventListener('deviceorientation', handleOrientation, true);
                }

                await fetchPrayerTimes(coords.latitude, coords.longitude);
            } catch (error) {
                console.error("Init Error:", error);
                const cityEl = document.getElementById('city-name');
                if (cityEl) {
                    const lang = translations[currentLang] || translations['en'];
                    cityEl.innerText = lang.error_loc || "Location Error";
                }
            } finally {
                const loader = document.getElementById('loading');
                if (loader) {
                    loader.style.opacity = '0';
                    setTimeout(() => loader.style.display = 'none', 500);
                }
            }
        }

        async function fetchPrayerTimes(lat, lon) {
            const method = methodMap[currentCountryCode] || methodMap['default'];
            console.log(`Fetching prayer times for country: ${currentCountryCode} using method: ${method}`);

            const response = await fetch(`https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=${method}`);
            const data = await response.json();
            prayerTimings = data.data.timings;
            targetTimezone = data.data.meta.timezone;
            updateUI(data.data);
            startCountdown();
        }

        function openLocationSearch() {
            document.getElementById('location-overlay').classList.add('active');
            document.getElementById('location-input').focus();
        }

        function closeLocationSearch() {
            document.getElementById('location-overlay').classList.remove('active');
        }

        async function searchLocation() {
            const query = document.getElementById('location-input').value;
            if (query.length < 3) return;

            const resultsDiv = document.getElementById('search-results');
            const lang = translations[currentLang] || translations['en'];
            resultsDiv.innerHTML = `<div class="stat-value" style="font-size: 1rem; text-align: center;">${lang.searching || 'Searching...'}</div>`;

            try {
                const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5`);
                const data = await res.json();

                resultsDiv.innerHTML = '';
                data.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'search-result-item';
                    const name = item.display_name.split(',')[0];
                    div.innerHTML = `
                        <div class="search-result-name">${name}</div>
                        <div class="search-result-details">${item.display_name}</div>
                    `;
                    div.onclick = () => selectLocation(item.lat, item.lon, name);
                    resultsDiv.appendChild(div);
                });
            } catch (e) { console.error("Search error:", e); }
        }

        async function selectLocation(lat, lon, name) {
            const coords = { latitude: parseFloat(lat), longitude: parseFloat(lon), name: name };
            localStorage.setItem('manualLocation', JSON.stringify(coords));

            // We need to fetch the country code for this new location to ensure correct prayer times
            await fetchCityName(lat, lon);

            document.getElementById('city-name').innerText = name;
            closeLocationSearch();
            location.reload(); // Simple way to reset state and re-fetch everything
        }

        function useAutoLocation() {
            localStorage.removeItem('manualLocation');
            localStorage.removeItem('countryCode'); // Clear country code to force re-detect
            closeLocationSearch();
            location.reload();
        }

        function getPosition() {
            return new Promise((resolve, reject) => {
                navigator.geolocation.getCurrentPosition(resolve, reject);
            });
        }

        async function fetchCityName(lat, lon) {
            try {
                const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
                const data = await response.json();
                const city = data.address.city || data.address.town || data.address.suburb || "Current Location";

                if (data.address && data.address.country_code) {
                    currentCountryCode = data.address.country_code.toLowerCase();
                    localStorage.setItem('countryCode', currentCountryCode);
                }

                document.getElementById('city-name').innerText = city;
            } catch (e) {
                console.error("City fetch error:", e);
                const lang = translations[currentLang] || translations['en'];
                document.getElementById('city-name').innerText = lang.detecting || "My Location";
            }
        }

        function calculateQibla(lat, lon) {
            const meccaLat = 21.4225 * Math.PI / 180;
            const meccaLon = 39.8262 * Math.PI / 180;
            const phi = lat * Math.PI / 180;
            const lambda = lon * Math.PI / 180;

            const q = Math.atan2(Math.sin(meccaLon - lambda), Math.cos(phi) * Math.tan(meccaLat) - Math.sin(phi) * Math.cos(meccaLon - lambda));
            qiblaAngle = (q * 180 / Math.PI + 360) % 360;
            document.getElementById('qibla-text').innerText = `${Math.round(qiblaAngle)}Â°`;
            document.getElementById('qibla-arrow').style.transform = `rotate(${qiblaAngle}deg)`;
        }

        function handleOrientation(event) {
            let heading = event.webkitCompassHeading || event.alpha;
            if (typeof heading !== 'undefined' && heading !== null) {
                const arrowRotation = qiblaAngle - heading;
                document.getElementById('qibla-arrow').style.transform = `rotate(${arrowRotation}deg)`;

                const lang = translations[currentLang] || translations['en'];
                if (Math.abs(arrowRotation % 360) < 5) {
                    document.getElementById('compass-status').innerText = lang.qibla_facing || "ğŸ•‹ Facing Kaaba!";
                    document.getElementById('compass-status').style.color = "#4ade80";
                } else {
                    document.getElementById('compass-status').innerText = lang.qibla_align || "Align arrow to the Kaaba";
                    document.getElementById('compass-status').style.color = "var(--text-secondary)";
                }
            }
        }

        async function requestCompassPermission() {
            if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                try {
                    const permission = await DeviceOrientationEvent.requestPermission();
                    if (permission === 'granted') {
                        window.addEventListener('deviceorientation', handleOrientation, true);
                        document.getElementById('compass-btn').style.display = 'none';
                    }
                } catch (err) {
                    console.error(err);
                }
            }
        }

        function updateUI(data) {
            const list = document.getElementById('prayer-list');
            list.innerHTML = '';

            const timings = data.timings;
            const isRTL = (currentLang === 'ar' || currentLang === 'ur' || currentLang === 'fa');
            const hijriMonth = isRTL ? data.date.hijri.month.ar : data.date.hijri.month.en;
            document.getElementById('hijri-date').innerText = `${data.date.hijri.day} ${hijriMonth} ${data.date.hijri.year}`;
            document.getElementById('sunrise-time').innerText = format12h(timings.Sunrise);

            const lang = translations[currentLang] || translations['en'];
            prayerOrder.forEach(name => {
                const div = document.createElement('div');
                div.className = 'prayer-item';
                div.id = `prayer-${name}`;
                const localizedName = lang[name.toLowerCase()] || name;
                div.innerHTML = `
                    <span>${localizedName}</span>
                    <span>${format12h(timings[name])}</span>
                `;
                list.appendChild(div);
            });
        }

        function startCountdown() {
            updateCountdown();
            setInterval(updateCountdown, 1000);
        }

        function getRemoteTime() {
            // Get the current time in the target timezone
            const now = new Date();
            const formatter = new Intl.DateTimeFormat('en-US', {
                timeZone: targetTimezone,
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                year: 'numeric',
                month: '2-digit',
                day: '2-digit'
            });
            const parts = formatter.formatToParts(now);
            const d = {};
            parts.forEach(p => d[p.type] = p.value);

            // Create a Date object that "looks like" the remote local time
            // This is just for easier calculation within the script
            const remoteNow = new Date(`${d.year}-${d.month}-${d.day}T${d.hour}:${d.minute}:${d.second}`);
            return remoteNow;
        }

        function updateCountdown() {
            if (!prayerTimings.Fajr) return;
            const remoteNow = getRemoteTime();
            const currentTime = remoteNow.getHours() * 3600 + remoteNow.getMinutes() * 60 + remoteNow.getSeconds();

            const lang = translations[currentLang] || translations['en'];
            const localTimeLabel = lang.local_time || "Local Time";
            const nextLabel = lang.next || "NEXT";

            // Update the small local time display
            document.getElementById('remote-local-time').innerText = `${localTimeLabel}: ${format12h(`${remoteNow.getHours()}:${remoteNow.getMinutes().toString().padStart(2, '0')}`)}`;

            let found = false;
            for (let name of prayerOrder) {
                const [hrs, mins] = prayerTimings[name].split(':').map(Number);
                const prayerSeconds = hrs * 3600 + mins * 60;

                if (notificationsEnabled && prayerSeconds === currentTime) {
                    new Notification("Prayer Time", {
                        body: `It's time for ${name} prayer in ${document.getElementById('city-name').innerText}`,
                        icon: 'icon.png'
                    });
                }

                if (prayerSeconds > currentTime) {
                    nextPrayerTime = prayerSeconds;
                    nextPrayerName = name;
                    found = true;
                    break;
                }
            }

            if (!found) {
                const [hrs, mins] = prayerTimings['Fajr'].split(':').map(Number);
                nextPrayerTime = hrs * 3600 + mins * 60 + 86400;
                nextPrayerName = 'Fajr';
            }

            const diff = nextPrayerTime - currentTime;
            const h = Math.floor(diff / 3600);
            const m = Math.floor((diff % 3600) / 60);
            const s = Math.floor(diff % 60);

            const localizedNextName = lang[nextPrayerName.toLowerCase()] || nextPrayerName;
            document.getElementById('countdown').innerText = `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            document.getElementById('next-prayer-name').innerHTML = `<span data-i18n="next">${nextLabel}</span>: ${localizedNextName}`;

            updateActivePrayer(currentTime);
        }

        function updateActivePrayer(nowSecs) {
            let active = 'Isha';
            for (let name of prayerOrder) {
                const [h, m] = prayerTimings[name].split(':').map(Number);
                if (nowSecs >= (h * 3600 + m * 60)) {
                    active = name;
                }
            }

            document.querySelectorAll('.prayer-item').forEach(el => el.classList.remove('active'));
            const activeEl = document.getElementById(`prayer-${active}`);
            if (activeEl) activeEl.classList.add('active');

            if (currentTheme === 'dynamic') {
                document.documentElement.style.setProperty('--bg-gradient', gradients[active] || gradients['Isha']);
            } else {
                document.documentElement.style.removeProperty('--bg-gradient');
            }
        }

        // PWA Install Logic
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent Chrome 67 and earlier from automatically showing the prompt
            e.preventDefault();
            // Stash the event so it can be triggered later.
            installPromptEvent = e;
            // Update UI to notify the user they can add to home screen
            const btn = document.getElementById('install-app-btn');
            if(btn) btn.style.display = 'flex';
        });

        async function installApp() {
            if (!installPromptEvent) return;
            // Show the install prompt
            installPromptEvent.prompt();
            // Wait for the user to respond to the prompt
            const { outcome } = await installPromptEvent.userChoice;
            console.log(`User response to the install prompt: ${outcome}`);
            // We've used the prompt, and can't use it again, discard it
            installPromptEvent = null;
            document.getElementById('install-app-btn').style.display = 'none';
        }

        window.addEventListener('appinstalled', () => {
            // Hide the app-provided install promotion
            document.getElementById('install-app-btn').style.display = 'none';
            // Clear the deferred prompt so it can be garbage collected
            installPromptEvent = null;
            console.log('PWA was installed');
        });

        init();
    </script>
</body>

</html>